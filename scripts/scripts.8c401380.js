"use strict";var app=angular.module("projectApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngTouch","ui.router"]);app.config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/main"),a.state("main",{url:"/",templateUrl:"views/main.html",controller:"MainCtrl"}).state("quiz",{url:"/how-do-you-feel",templateUrl:"views/quiz.html",controller:"MainCtrl"}).state("quiz.q1",{url:"/q1",templateUrl:"views/quiz_q1.html",controller:"MainCtrl"}).state("quiz.q2",{url:"/q2",templateUrl:"views/quiz_q2.html",controller:"MainCtrl"}).state("quiz.q3",{url:"/q3",templateUrl:"views/quiz_q3.html",controller:"MainCtrl"}).state("quiz.q4",{url:"/q4",templateUrl:"views/quiz_q4.html",controller:"MainCtrl"}).state("quiz.q5",{url:"/q5",templateUrl:"views/quiz_q5.html",controller:"MainCtrl"}).state("summary",{url:"/summary",templateUrl:"views/quiz_summary.html",controller:"MainCtrl"})}]),angular.module("projectApp").controller("MainCtrl",["$scope","$state","QuizState","$rootScope",function(a,b,c,d){a.isDisabled1=c.pagesDisable.p1,a.isDisabled2=c.pagesDisable.p2,a.isDisabled3=c.pagesDisable.p3,a.isDisabled4=c.pagesDisable.p4,a.isDisabled5=c.pagesDisable.p5,a.isDisabled6=c.pagesDisable.p6,a.questionsStyles=c.questionsStyles,a.quizSummary=Math.round(c.questionsStyles.q1.points+1.5*c.questionsStyles.q2.points+c.questionsStyles.q3.points+c.questionsStyles.q4.points+2*c.questionsStyles.q5.points),0==a.quizSummary&&(a.chuj="chuj"),a.quizSummary>0&&(a.chuj="wieksze od zera"),d.$on("quizData.update",function(){a.quizSummary=c.questionsStyles.q1.points+c.questionsStyles.q2.points,a.isDisabled1=c.pagesDisable.p1,a.isDisabled2=c.pagesDisable.p2}),a.goToPage=function(a){b.go("quiz.q"+a),console.log("clicked")},a.goToSummary=function(){b.go("summary")}}]),angular.module("projectApp").controller("AboutCtrl",function(){}),app.service("QuizState",["$rootScope","$state",function(a,b){var c={q1:{sliderLeft:"103.5px",sliderTop:"-22.5px",points:0,pointsRounded:0,iconType:"calendar"},q2:{sliderLeft:"103.5px",sliderTop:"-22.5px",points:0,pointsRounded:0,iconType:"calendar"},q3:{sliderLeft:"103.5px",sliderTop:"-22.5px",points:0,pointsRounded:0,iconType:"clock"},q4:{sliderLeft:"103.5px",sliderTop:"-22.5px",points:0,pointsRounded:0,iconType:"cloud"},q5:{sliderLeft:"103.5px",sliderTop:"-22.5px",points:0,pointsRounded:0,iconType:"calendar"}},d={p1:!1,p2:!0,p3:!0,p4:!0,p5:!0,p6:!0},e={};return a.$on("quizData.update",function(){for(i=0;7>i;i++)if(b.$current=="quiz.q"+i){var a="p"+(i+1);d[a]=!1;var c=angular.element(".paginationRow .q"+(i+1)),e=angular.element(".btnNext");e.removeAttr("disabled"),c.removeAttr("disabled"),console.log(c.attr("disabled"))}}),{questionsStyles:c,currentPage:e,pagesDisable:d}}]),app.directive("quizCircle",["$state","QuizState","$rootScope",function(a,b,c){return{restrict:"E",templateUrl:"partials/quiz_circle.html",link:function(d){function e(a){$("#circle .circleBg").addClass(a),j>0&&1>=j?$("#circle .circleBg."+a).css({background:"url(../images/icon_"+a+"_1.png) #fff no-repeat"}):j>1&&2>=j?$("#circle .circleBg."+a).css({background:"url(../images/icon_"+a+"_2.png) #fff no-repeat"}):j>2&&3>=j?$("#circle .circleBg."+a).css({background:"url(../images/icon_"+a+"_3.png) #fff no-repeat"}):j>3&&4>=j?$("#circle .circleBg."+a).css({background:"url(../images/icon_"+a+"_4.png) #fff no-repeat"}):j>4&&5>=j&&$("#circle .circleBg."+a).css({background:"url(../images/icon_"+a+"_5.png) #fff no-repeat"})}var f=!1,g=!1,h=!1,j=0,k=angular.element(".pieFill"),l=angular.element("#slice"),m=angular.element("#slider"),n=angular.element("#slice .pie"),o=b.questionsStyles;for(i=0;7>i;i++)if(a.$current=="quiz.q"+i){console.log("strona"+i);var p="q"+i;console.log(o[p]),m.css({left:o[p].sliderLeft,top:o[p].sliderTop}),j=o[p].points,n.css({"-webkit-transform":"rotate("+70*j+"deg)"}),2.39>j&&k.hide(),j>=2.39&&k.show(),2.5>j?l.removeClass("gt50"):j>=2.5&&l.addClass("gt50")}c.$on("quizBg.calendar",function(){f=!0,e("calendar")}),c.$on("quizBg.clock",function(){g=!0,e("clock")}),c.$on("quizBg.cloud",function(){h=!0,e("cloud")});var q=angular.element("#circle"),r=angular.element(".poolContainer"),s=22.5,t=22.5,u=125,v=0,w=q.offset(),x={x:w.left,y:w.top},y=0,z=0,A=!1;r.on("mousedown",function(){A=!0}),r.on("mouseup",function(){A=!1}),r.on("mousemove",function(e){function j(a){$("#circle .circleBg").addClass(a),v>0&&1>=v?$("#circle .circleBg."+a).css({background:"url(../images/icon_"+a+"_1.png) #fff no-repeat"}):v>1&&2>=v?$("#circle .circleBg."+a).css({background:"url(../images/icon_"+a+"_2.png) #fff no-repeat"}):v>2&&3>=v?$("#circle .circleBg."+a).css({background:"url(../images/icon_"+a+"_3.png) #fff no-repeat"}):v>3&&4>=v?$("#circle .circleBg."+a).css({background:"url(../images/icon_"+a+"_4.png) #fff no-repeat"}):v>4&&5>=v&&$("#circle .circleBg."+a).css({background:"url(../images/icon_"+a+"_5.png) #fff no-repeat"})}if(A){var p={x:e.clientX-x.x,y:e.clientY-x.y},q=Math.atan2(p.x-u,p.y-u);v=-q/(Math.PI/2.5)+2.5,y=Math.round(u*Math.sin(v*Math.PI/2.5)),z=Math.round(u*-Math.cos(v*Math.PI/2.5));var r=y+u-s,w=z+u-t;m.css({left:r,top:w}),2.39>v&&k.hide(),v>=2.39&&k.show(),2.5>v?l.removeClass("gt50"):v>=2.5&&l.addClass("gt50"),n.css({"-webkit-transform":"rotate("+70*v+"deg)"}),f&&j("calendar"),g&&j("clock"),h&&j("cloud"),d.$apply(function(){var d={sliderLeft:r,sliderTop:w,points:v};for(c.isDisabled2="false",i=0;7>i;i++)if(a.$current=="quiz.q"+i){{var e="q"+i,f="p"+i;o[e].sliderLeft=d.sliderLeft}o[e].sliderTop=d.sliderTop,o[e].points=d.points,o[e].pointsRounded=Math.round(d.points),b.pagesDisable[f]=!1,c.$emit("quizData.update")}})}})}}}]),app.directive("calendar",["$state","QuizState","$rootScope",function(a,b,c){return{restrict:"A",link:function(){c.$emit("quizBg.calendar")}}}]),app.directive("clock",["$state","QuizState","$rootScope",function(a,b,c){return{restrict:"A",link:function(){c.$emit("quizBg.clock")}}}]),app.directive("cloud",["$state","QuizState","$rootScope",function(a,b,c){return{restrict:"A",link:function(){c.$emit("quizBg.cloud")}}}]);